<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>RGmath.pm</title>
<link rev="made" href="mailto:root@localhost" />
</head>

<style type="text/css">
<!--
/* default style sheet generated by perltidy */
body {background: #FFFFFF; color: #000000}
pre { color: #000000; 
      background: #F0F0F0;
      font-family: courier;
    } 

.c  { color: #228B22;} /* comment */
.cm { color: #000000;} /* comma */
.co { color: #000000;} /* colon */
.h  { color: #CD5555; font-weight:bold;} /* here-doc-target */
.hh { color: #CD5555; font-style:italic;} /* here-doc-text */
.i  { color: #00688B;} /* identifier */
.j  { color: #CD5555; font-weight:bold;} /* label */
.k  { color: #8B008B; font-weight:bold;} /* keyword */
.m  { color: #FF0000; font-weight:bold;} /* subroutine */
.n  { color: #B452CD;} /* numeric */
.p  { color: #000000;} /* paren */
.pd { color: #228B22; font-style:italic;} /* pod-text */
.pu { color: #000000;} /* punctuation */
.q  { color: #CD5555;} /* quote */
.s  { color: #000000;} /* structure */
.sc { color: #000000;} /* semicolon */
.v  { color: #B452CD;} /* v-string */
.w  { color: #000000;} /* bareword */
-->
</style>
<body style="background-color: white">
<a name="-top-"></a>
<h1>RGmath.pm</h1>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name__uplink_">NAME &lt;UPLINK&gt;</a></li>
	<li><a href="#synopsis__uplink_">SYNOPSIS &lt;UPLINK&gt;</a></li>
	<li><a href="#description__uplink_">DESCRIPTION &lt;UPLINK&gt;</a></li>
	<li><a href="#known_issues__uplink_">KNOWN ISSUES &lt;UPLINK&gt;</a></li>
	<li><a href="#future_improvements__uplink_">FUTURE IMPROVEMENTS &lt;UPLINK&gt;</a></li>
	<li><a href="#authors__uplink_">AUTHORS &lt;UPLINK&gt;</a></li>
	<li><a href="#created__uplink_">CREATED &lt;UPLINK&gt;</a></li>
	<li><a href="#revision__uplink_">REVISION &lt;UPLINK&gt;</a></li>
</ul>
<!-- INDEX END -->
<h2>Code Index:</h2>
<!-- BEGIN CODE INDEX --><a name="code-index"></a>
<ul>
<li><a href="#package-RGmath-">package RGmath</a>
<ul>
<li><a href="#interpolate-">interpolate</a></li>
<li><a href="#union-">union</a></li>
<li><a href="#xor_array-">xor_array</a></li>
<li><a href="#distinct_list-">distinct_list</a></li>
<li><a href="#intersection-">intersection</a></li>
<li><a href="#get_sum-">get_sum</a></li>
<li><a href="#smart_sort-">smart_sort</a></li>
<li><a href="#smart_cmp-">smart_cmp</a></li>
</ul>
</li>
<li><a href="#EOF-">EOF</a></li>
</ul>
<!-- END CODE INDEX -->

<hr />
<pre><a name="package-RGmath-"></a><span class="k">package </span><span class="i">RGmath</span><span class="sc">;</span>

<span class="c">##############################</span>
<span class="c"># perldoc_header             #</span>
<span class="c">##############################</span>

</pre><p></p>
<hr />
<h1><a name="name__uplink_">NAME &lt;UPLINK&gt;</a></h1>
<p>RGmath.pm -</p>
<p>
</p>
<hr />
<h1><a name="synopsis__uplink_">SYNOPSIS &lt;UPLINK&gt;</a></h1>
<pre>
        &lt;&lt;SYNOPSIS&gt;&gt;</pre>
<p>
</p>
<hr />
<h1><a name="description__uplink_">DESCRIPTION &lt;UPLINK&gt;</a></h1>
<pre>
<span class="c">##############################</span>
<span class="c"># superclasses               #</span>
<span class="c">##############################</span>

<span class="i">@ISA</span> = <span class="q">qw(Exporter)</span><span class="sc">;</span>

<span class="c">##############################</span>
<span class="c"># system_variables           #</span>
<span class="c">##############################</span>
<span class="k">require</span> <span class="w">Exporter</span><span class="sc">;</span>
<span class="i">@EXPORT</span> = <span class="q">qw(</span>
    <span class="q">intersection</span>
    <span class="q">union</span>
    <span class="q">xor_array</span>
    <span class="q">interpolate</span>
    <span class="q">distinct_list</span>
    <span class="q">$pi $size2mob</span>
    <span class="q">$mob2size</span>
    <span class="q">get_sum</span>
<span class="q">)</span><span class="sc">;</span>

<span class="c">##############################</span>
<span class="c"># standard_modules_ref       #</span>
<span class="c">##############################</span>
<span class="c">##############################</span>
<span class="c"># custom_modules_ref         #</span>
<span class="c">##############################</span>

<span class="k">use</span> <span class="w">SDB::CustomSettings</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">RGTools::RGIO</span><span class="sc">;</span>

<span class="c">##############################</span>
<span class="c"># global_vars                #</span>
<span class="c">##############################</span>
<span class="c">##############################</span>
<span class="c"># modular_vars               #</span>
<span class="c">##############################</span>
<span class="c">##############################</span>
<span class="c"># constants                  #</span>
<span class="c">##############################</span>
<span class="c">##############################</span>
<span class="c"># main_header                #</span>
<span class="c">##############################</span>
<span class="i">$pi</span> = <span class="n">3.14</span><span class="sc">;</span>

<span class="c">##############################</span>
<span class="c"># constructor                #</span>
<span class="c">##############################</span>
<span class="c">##############################</span>
<span class="c"># public_methods             #</span>
<span class="c">##############################</span>
<span class="c">##############################</span>
<span class="c"># public_functions           #</span>
<span class="c">##############################</span>

<span class="c">###################</span>
<a name="interpolate-"></a><span class="k">sub </span><span class="m">interpolate</span> <span class="s">{</span>
<span class="c">###################</span>
    <span class="k">my</span> <span class="i">$value</span>    = <span class="k">shift</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$filename</span> = <span class="k">shift</span><span class="sc">;</span>    <span class="c">#  tab delimited file containing values to interpolate</span>
    <span class="k">my</span> <span class="i">$roundoff</span> = <span class="k">shift</span><span class="sc">;</span>

    <span class="i">$roundoff</span> ||= <span class="n">3</span><span class="sc">;</span>

    <span class="c"># print &quot;Trying to interpolate $value from Table: $filename.\n&quot;;</span>

    <span class="k">open</span><span class="s">(</span> <span class="w">TABLE</span><span class="cm">,</span> <span class="q">&quot;$filename&quot;</span> <span class="s">)</span> <span class="k">or</span> <span class="k">die</span> <span class="q">&quot;Error opening lookup table: $TABLE\n&quot;</span><span class="sc">;</span>

    <span class="k">my</span> <span class="i">$X1</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$X2</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$Y1</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$Y2</span><span class="sc">;</span>

    <span class="k">while</span> <span class="s">(</span><span class="q">&lt;TABLE&gt;</span><span class="s">)</span> <span class="s">{</span>
        <span class="k">if</span> <span class="s">(</span><span class="q">/([\.\d]+)\s+([\.\d]+)/</span><span class="s">)</span> <span class="s">{</span>
            <span class="k">if</span> <span class="s">(</span> <span class="i">$1</span> &lt;= <span class="i">$value</span> <span class="s">)</span> <span class="s">{</span>
                <span class="i">$X1</span> = <span class="i">$1</span><span class="sc">;</span>
                <span class="i">$Y1</span> = <span class="i">$2</span><span class="sc">;</span>
            <span class="s">}</span>
            <span class="k">elsif</span> <span class="s">(</span> <span class="i">$1</span> &gt; <span class="i">$value</span> <span class="s">)</span> <span class="s">{</span>
                <span class="i">$X2</span> = <span class="i">$1</span><span class="sc">;</span>
                <span class="i">$Y2</span> = <span class="i">$2</span><span class="sc">;</span>
                <span class="k">last</span><span class="sc">;</span>
            <span class="s">}</span>
        <span class="s">}</span>
    <span class="s">}</span>
    <span class="k">close</span><span class="s">(</span><span class="w">TABLE</span><span class="s">)</span><span class="sc">;</span>

    <span class="k">if</span> <span class="s">(</span> !<span class="i">$X1</span> <span class="s">)</span> <span class="s">{</span>
        <span class="k">print</span> <span class="q">&quot;Need to extrapolate beginning of $filename table ($value &lt; first value)\n&quot;</span><span class="sc">;</span>
        <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
    <span class="s">}</span>
    <span class="k">elsif</span> <span class="s">(</span> !<span class="i">$X2</span> <span class="s">)</span> <span class="s">{</span>
        <span class="k">print</span> <span class="q">&quot;Need to extrapolate end of table ($value &lt; last value\n&quot;</span><span class="sc">;</span>
        <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
    <span class="s">}</span>
    <span class="k">else</span> <span class="s">{</span>
        <span class="k">my</span> <span class="i">$diff</span>  = <span class="i">$X2</span> - <span class="i">$X1</span><span class="sc">;</span>
        <span class="k">my</span> <span class="i">$xdiff</span> = <span class="i">$value</span> - <span class="i">$X1</span><span class="sc">;</span>

        <span class="k">my</span> <span class="i">$ydiff</span> = <span class="i">$Y2</span> - <span class="i">$Y1</span><span class="sc">;</span>
        <span class="i">$interp</span> = <span class="s">(</span> <span class="i">$xdiff</span> / <span class="i">$diff</span> <span class="s">)</span> * <span class="i">$ydiff</span> + <span class="i">$Y1</span><span class="sc">;</span>
        <span class="k">if</span> <span class="s">(</span> <span class="i">$interp</span> =~ <span class="q">/^(\d+\.?\d{$roundoff})/</span> <span class="s">)</span> <span class="s">{</span> <span class="i">$interp</span> = <span class="i">$1</span><span class="sc">;</span> <span class="s">}</span>

        <span class="c">#    print &quot;interpolated $value to $interp ($X1,$Y1)..($X2,$Y2)\n&quot;;</span>
        <span class="k">return</span> <span class="i">$interp</span><span class="sc">;</span>
    <span class="s">}</span>
<span class="s">}</span>

<span class="c">##############</span>
<a name="union-"></a><span class="k">sub </span><span class="m">union</span> <span class="s">{</span>
<span class="c">##############</span>
    <span class="c">#</span>
    <span class="c"># return the union of two arrays as an array</span>
    <span class="c">#</span>
    <span class="k">my</span> <span class="i">$ref</span>    = <span class="k">shift</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">@result</span> = <span class="i">@</span>{<span class="i">$ref</span>}<span class="sc">;</span>

    <span class="k">while</span> <span class="s">(</span> <span class="k">my</span> <span class="i">$nextref</span> = <span class="k">shift</span> <span class="s">)</span> <span class="s">{</span>
        <span class="k">my</span> <span class="i">@nextArray</span> = <span class="i">@</span>{<span class="i">$nextref</span>}<span class="sc">;</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="i">$element</span> <span class="s">(</span><span class="i">@nextArray</span><span class="s">)</span> <span class="s">{</span>
            <span class="k">unless</span> <span class="s">(</span> <span class="k">grep</span> <span class="q">/^$element$/</span><span class="cm">,</span> <span class="i">@result</span> <span class="s">)</span> <span class="s">{</span> <span class="k">push</span><span class="s">(</span> <span class="i">@result</span><span class="cm">,</span> <span class="i">$element</span> <span class="s">)</span> <span class="s">}</span>
        <span class="s">}</span>
    <span class="s">}</span>
    <span class="k">return</span> \<span class="i">@result</span><span class="sc">;</span>
<span class="s">}</span>

<span class="c">##############</span>
<a name="xor_array-"></a><span class="k">sub </span><span class="m">xor_array</span> <span class="s">{</span>
<span class="c">##############</span>
    <span class="c">#</span>
    <span class="c"># return the xor of two arrays as an array</span>
    <span class="c">#</span>
    <span class="k">my</span> <span class="i">$aref</span> = <span class="k">shift</span><span class="sc">;</span>    <span class="c"># reference to second array</span>
    <span class="k">my</span> <span class="i">$bref</span> = <span class="k">shift</span><span class="sc">;</span>    <span class="c"># reference to second array</span>

    <span class="k">my</span> <span class="i">@xor</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">@union</span> = <span class="i">@</span>{ <span class="i">union</span><span class="s">(</span> <span class="i">$aref</span><span class="cm">,</span> <span class="i">$bref</span> <span class="s">)</span> }<span class="sc">;</span>
    <span class="k">foreach</span> <span class="k">my</span> <span class="i">$element</span> <span class="s">(</span><span class="i">@union</span><span class="s">)</span> <span class="s">{</span>
        <span class="k">my</span> <span class="i">$in_a</span> = <span class="k">grep</span> <span class="q">/^$element$/</span><span class="cm">,</span> <span class="i">@$aref</span><span class="sc">;</span>
        <span class="k">my</span> <span class="i">$in_b</span> = <span class="k">grep</span> <span class="q">/^$element$/</span><span class="cm">,</span> <span class="i">@$bref</span><span class="sc">;</span>
        <span class="k">if</span> <span class="s">(</span> <span class="s">(</span> <span class="i">$in_a</span> &amp;&amp; !<span class="i">$in_b</span> <span class="s">)</span> || <span class="s">(</span> !<span class="i">$in_a</span> &amp;&amp; <span class="i">$in_b</span> <span class="s">)</span> <span class="s">)</span> <span class="s">{</span>
            <span class="k">if</span> <span class="s">(</span> !<span class="k">grep</span> <span class="q">/^$element$/</span><span class="cm">,</span> <span class="i">@xor</span> <span class="s">)</span> <span class="s">{</span> <span class="k">push</span> <span class="i">@xor</span><span class="cm">,</span> <span class="i">$element</span><span class="sc">;</span> <span class="s">}</span>
        <span class="s">}</span>
    <span class="s">}</span>
    <span class="k">return</span> \<span class="i">@xor</span><span class="sc">;</span>
<span class="s">}</span>

<span class="c">###############</span>
<a name="distinct_list-"></a><span class="k">sub </span><span class="m">distinct_list</span> <span class="s">{</span>
<span class="c">###############</span>
    <span class="k">my</span> <span class="i">$list</span>  = <span class="k">shift</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$strip</span> = <span class="k">shift</span><span class="sc">;</span>

    <span class="k">my</span> <span class="i">@distinct</span><span class="sc">;</span>
    <span class="k">foreach</span> <span class="k">my</span> <span class="i">$item</span> <span class="s">(</span><span class="i">@$list</span><span class="s">)</span> <span class="s">{</span>
        <span class="k">if</span> <span class="s">(</span> <span class="i">$strip</span> &amp;&amp; <span class="s">(</span> <span class="i">$item</span> !~ <span class="q">/\S/</span> <span class="s">)</span> <span class="s">)</span> <span class="s">{</span><span class="k">next</span><span class="s">}</span>
        <span class="k">if</span> <span class="s">(</span><span class="i">$strip</span><span class="s">)</span> <span class="s">{</span> <span class="i">$item</span> =~ <span class="q">/^\s+/</span> / <span class="w">g</span> <span class="s">}</span>
        <span class="k">if</span> <span class="s">(</span><span class="i">$strip</span><span class="s">)</span> <span class="s">{</span> <span class="i">$item</span> =~ <span class="q">/\s+$/</span> / <span class="w">g</span> <span class="s">}</span>
        <span class="k">if</span> <span class="s">(</span> !<span class="k">grep</span> <span class="q">/^$item$/</span><span class="cm">,</span> <span class="i">@distinct</span> <span class="s">)</span> <span class="s">{</span> <span class="k">push</span> <span class="i">@distinct</span><span class="cm">,</span> <span class="i">$item</span> <span class="s">}</span>
    <span class="s">}</span>
    <span class="k">return</span> \<span class="i">@distinct</span><span class="sc">;</span>
<span class="s">}</span>

<span class="c">#&lt;snip&gt;</span>
<span class="c">#Usage example:</span>
<span class="c">#        my ($intersec,$a_only,$b_only)=&amp;RGmath::intersection(\@a,\@b);</span>
<span class="c">#Or:     my ($intersec,$a_only,$b_only)=&amp;RGmatch::intersection($astr,$bstr);</span>
<span class="c">#&lt;/snip&gt;</span>
<span class="c">#####################</span>
<a name="intersection-"></a><span class="k">sub </span><span class="m">intersection</span> <span class="s">{</span>
<span class="c">#####################</span>
    <span class="c">#</span>
    <span class="c"># return the intersection of two arrays as an array</span>
    <span class="c">#</span>
    <span class="k">my</span> <span class="i">$aref</span> = <span class="k">shift</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$bref</span> = <span class="k">shift</span><span class="sc">;</span>

    <span class="i">$aref</span> = <span class="i">Cast_List</span><span class="s">(</span> -<span class="w">list</span> <span class="cm">=&gt;</span> <span class="i">$aref</span><span class="cm">,</span> -<span class="w">to</span> <span class="cm">=&gt;</span> <span class="q">'arrayref'</span> <span class="s">)</span><span class="sc">;</span>
    <span class="i">$bref</span> = <span class="i">Cast_List</span><span class="s">(</span> -<span class="w">list</span> <span class="cm">=&gt;</span> <span class="i">$bref</span><span class="cm">,</span> -<span class="w">to</span> <span class="cm">=&gt;</span> <span class="q">'arrayref'</span> <span class="s">)</span><span class="sc">;</span>

    <span class="k">my</span> <span class="i">@a</span> = <span class="i">@</span>{<span class="i">$aref</span>}<span class="sc">;</span>
    <span class="k">my</span> <span class="i">@b</span> = <span class="i">@</span>{<span class="i">$bref</span>}<span class="sc">;</span>

    <span class="k">my</span> <span class="i">@a_only</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span>    <span class="c">## elements only found in first array</span>
    <span class="k">my</span> <span class="i">@b_only</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span>    <span class="c">## elements only found in second array</span>

    <span class="k">my</span> <span class="i">@result</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span>
    <span class="k">foreach</span> <span class="k">my</span> <span class="i">$element</span> <span class="s">(</span><span class="i">@b</span><span class="s">)</span> <span class="s">{</span>
        <span class="k">if</span>   <span class="s">(</span> <span class="k">grep</span> <span class="q">/^$element$/</span><span class="cm">,</span> <span class="i">@a</span> <span class="s">)</span> <span class="s">{</span> <span class="k">push</span><span class="s">(</span> <span class="i">@result</span><span class="cm">,</span> <span class="i">$element</span> <span class="s">)</span> <span class="s">}</span>
        <span class="k">else</span>                           <span class="s">{</span> <span class="k">push</span><span class="s">(</span> <span class="i">@b_only</span><span class="cm">,</span> <span class="i">$element</span> <span class="s">)</span> <span class="s">}</span>
    <span class="s">}</span>

    <span class="c">### populate the array of element ONLY in array a.</span>
    <span class="k">foreach</span> <span class="k">my</span> <span class="i">$element</span> <span class="s">(</span><span class="i">@a</span><span class="s">)</span> <span class="s">{</span>
        <span class="k">unless</span> <span class="s">(</span> <span class="k">grep</span> <span class="q">/^$element$/</span><span class="cm">,</span> <span class="i">@b</span> <span class="s">)</span> <span class="s">{</span> <span class="k">push</span><span class="s">(</span> <span class="i">@a_only</span><span class="cm">,</span> <span class="i">$element</span> <span class="s">)</span> <span class="s">}</span>
    <span class="s">}</span>

    <span class="k">return</span> <span class="s">(</span> \<span class="i">@result</span><span class="cm">,</span> \<span class="i">@a_only</span><span class="cm">,</span> \<span class="i">@b_only</span> <span class="s">)</span><span class="sc">;</span>
<span class="s">}</span>

<span class="c"># Return the sum given an array of values</span>
<span class="c">#</span>
<span class="c"># Return:  scalar</span>
<span class="c">###########</span>
<a name="get_sum-"></a><span class="k">sub </span><span class="m">get_sum</span> <span class="s">{</span>
<span class="c">###########</span>
    <span class="k">my</span> <span class="i">%args</span>   = <span class="i">@_</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$values</span> = <span class="i">$args</span>{ -<span class="k">values</span> }<span class="sc">;</span>    <span class="c">## values to be added</span>
    <span class="k">my</span> <span class="i">$sum</span><span class="sc">;</span>
    <span class="k">foreach</span> <span class="k">my</span> <span class="i">$val</span> <span class="s">(</span> <span class="i">@</span>{<span class="i">$values</span>} <span class="s">)</span> <span class="s">{</span>
        <span class="i">$sum</span> += <span class="i">$val</span><span class="sc">;</span>
    <span class="s">}</span>
    <span class="k">return</span> <span class="i">$sum</span><span class="sc">;</span>
<span class="s">}</span>

<span class="c">###########################################</span>
<span class="c"># A sort function that provides a smart ascending sort when sorting alphanumeric string</span>
<span class="c"># For example, B10 is larger than B3 (a native perl sort will sort B10 smaller than B3</span>
<span class="c"># This is just a wrapper for using smart_cmp and is the same as using sort {&amp;smart_cmp($a,$b)}</span>
<span class="c">#&lt;snip&gt;</span>
<span class="c">#Usage example:</span>
<span class="c">#      my @sortarray = smart_sort(@array);</span>
<span class="c">#&lt;/snip&gt;</span>
<span class="c"># return a smart ascending sorted array (see smart_cmp for descending sort and case insensitive sort)</span>
<span class="c">##################</span>
<a name="smart_sort-"></a><span class="k">sub </span><span class="m">smart_sort</span> <span class="s">{</span>
<span class="c">##################</span>
    <span class="k">my</span> <span class="s">(</span><span class="i">@arr</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">@newarr</span> = <span class="k">sort</span> <span class="s">{</span> <span class="i">&amp;smart_cmp</span><span class="s">(</span> <span class="i">$a</span><span class="cm">,</span> <span class="i">$b</span> <span class="s">)</span> <span class="s">}</span> <span class="i">@arr</span><span class="sc">;</span>
    <span class="k">return</span> <span class="i">@newarr</span><span class="sc">;</span>
<span class="s">}</span>

<span class="c">###########################################</span>
<span class="c"># A comparison function that compares two alphanumeric string and</span>
<span class="c"># returns -1 if input1 is less than input2</span>
<span class="c"># returns 0 if input1 is equal to input2</span>
<span class="c"># returns 1 if input1 is greater than input2</span>
<span class="c"># For example, &amp;smart_cmp(&quot;B10&quot;,&quot;B3&quot;) returns 1 because B10 is greater than B3</span>
<span class="c">#&lt;snip&gt;</span>
<span class="c">#Usage example:</span>
<span class="c">#      my $res = &amp;smart_cmp{$a,$b};</span>
<span class="c">#      or in a sort:</span>
<span class="c">#      my @sortarray = sort {&amp;smart_cmp($a,$b)} @array; # for ascending sort</span>
<span class="c">#      my @sortarray = sort {&amp;smart_cmp($b,$a)} @array; # for descending sort</span>
<span class="c">#      my @sortarray = sort {&amp;smart_cmp($a,$b,-case_insensitive=&gt;1)} @array; #for ascending case insensitive sort</span>
<span class="c">#&lt;/snip&gt;</span>
<span class="c">##################</span>
<a name="smart_cmp-"></a><span class="k">sub </span><span class="m">smart_cmp</span> <span class="s">{</span>
<span class="c">##################</span>
    <span class="k">my</span> <span class="i">%args</span>        = <span class="i">&amp;filter_input</span><span class="s">(</span> \<span class="i">@_</span><span class="cm">,</span> -<span class="w">args</span> <span class="cm">=&gt;</span> <span class="q">'a,b'</span> <span class="s">)</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$first</span>       = <span class="i">$args</span>{-<span class="w">a</span>}<span class="sc">;</span>
    <span class="k">my</span> <span class="i">$second</span>      = <span class="i">$args</span>{<span class="k">-b</span>}<span class="sc">;</span>
    <span class="k">my</span> <span class="i">$insensitive</span> = <span class="i">$args</span>{-<span class="w">case_insensitive</span>} || <span class="n">0</span><span class="sc">;</span>

    <span class="k">my</span> <span class="i">$res</span> = <span class="n">0</span><span class="sc">;</span>
    <span class="k">if</span> <span class="s">(</span><span class="i">$insensitive</span><span class="s">)</span> <span class="s">{</span>
        <span class="i">$first</span>  = <span class="k">uc</span><span class="s">(</span><span class="i">$first</span><span class="s">)</span><span class="sc">;</span>
        <span class="i">$second</span> = <span class="k">uc</span><span class="s">(</span><span class="i">$second</span><span class="s">)</span><span class="sc">;</span>
    <span class="s">}</span>
    <span class="k">my</span> <span class="i">@firstarr</span>  = <span class="i">$first</span>  =~ <span class="q">/\d+|\D+/g</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">@secondarr</span> = <span class="i">$second</span> =~ <span class="q">/\d+|\D+/g</span><span class="sc">;</span>

    <span class="k">while</span> <span class="s">(</span> <span class="i">$res</span> == <span class="n">0</span> <span class="s">)</span> <span class="s">{</span>
        <span class="k">my</span> <span class="i">$match1</span> = <span class="k">shift</span> <span class="i">@firstarr</span><span class="sc">;</span>
        <span class="k">my</span> <span class="i">$match2</span> = <span class="k">shift</span> <span class="i">@secondarr</span><span class="sc">;</span>
        <span class="k">if</span> <span class="s">(</span><span class="i">$match1</span><span class="s">)</span> <span class="s">{</span>
            <span class="k">if</span> <span class="s">(</span><span class="i">$match2</span><span class="s">)</span> <span class="s">{</span>
                <span class="k">if</span> <span class="s">(</span> <span class="i">$match1</span> =~ <span class="q">/\d+/</span> <span class="s">)</span> <span class="s">{</span>
                    <span class="k">if</span> <span class="s">(</span> <span class="i">$match2</span> =~ <span class="q">/\d+/</span> <span class="s">)</span> <span class="s">{</span>
                        <span class="k">if</span>   <span class="s">(</span> !<span class="s">(</span> <span class="i">$match1</span> &lt;=&gt; <span class="i">$match2</span> <span class="s">)</span> <span class="s">)</span> <span class="s">{</span> <span class="i">$res</span> = <span class="i">$match1</span> <span class="k">cmp</span> <span class="i">$match2</span> <span class="s">}</span>
                        <span class="k">else</span>                              <span class="s">{</span> <span class="i">$res</span> = <span class="i">$match1</span> &lt;=&gt; <span class="i">$match2</span> <span class="s">}</span>
                    <span class="s">}</span>
                    <span class="k">else</span> <span class="s">{</span> <span class="i">$res</span> = <span class="n">-1</span> <span class="s">}</span>
                <span class="s">}</span>
                <span class="k">else</span> <span class="s">{</span>
                    <span class="k">if</span>   <span class="s">(</span> <span class="i">$match2</span> =~ <span class="q">/\d+/</span> <span class="s">)</span> <span class="s">{</span> <span class="i">$res</span> = <span class="n">1</span> <span class="s">}</span>
                    <span class="k">else</span>                      <span class="s">{</span> <span class="i">$res</span> = <span class="i">$match1</span> <span class="k">cmp</span> <span class="i">$match2</span> <span class="s">}</span>
                <span class="s">}</span>
            <span class="s">}</span>
            <span class="k">else</span> <span class="s">{</span> <span class="i">$res</span> = <span class="n">1</span> <span class="s">}</span>
        <span class="s">}</span>
        <span class="k">else</span> <span class="s">{</span>
            <span class="k">if</span>   <span class="s">(</span><span class="i">$match2</span><span class="s">)</span> <span class="s">{</span> <span class="i">$res</span> = <span class="n">-1</span> <span class="s">}</span>
            <span class="k">else</span>           <span class="s">{</span> <span class="i">$res</span> = <span class="n">0</span><span class="sc">;</span> <span class="k">last</span><span class="sc">;</span> <span class="s">}</span>
        <span class="s">}</span>
    <span class="s">}</span>
    <span class="k">return</span> <span class="i">$res</span><span class="sc">;</span>
<span class="s">}</span>

<span class="c">##############################</span>
<span class="c"># private_methods            #</span>
<span class="c">##############################</span>
<span class="c">##############################</span>
<span class="c"># private_functions          #</span>
<span class="c">##############################</span>
<span class="c">##############################</span>
<span class="c"># main_footer                #</span>
<span class="c">##############################</span>
<span class="c">##############################</span>
<span class="c"># perldoc_footer             #</span>
<span class="c">##############################</span>

</pre><p></p>
<hr />
<h1><a name="known_issues__uplink_">KNOWN ISSUES &lt;UPLINK&gt;</a></h1>
<p>&lt;&lt;KNOWN ISSUES&gt;&gt;</p>
<p>
</p>
<hr />
<h1><a name="future_improvements__uplink_">FUTURE IMPROVEMENTS &lt;UPLINK&gt;</a></h1>
<p>&lt;&lt;FUTURE IMPROVEMENTS&gt;&gt;</p>
<p>
</p>
<hr />
<h1><a name="authors__uplink_">AUTHORS &lt;UPLINK&gt;</a></h1>
<p>&lt;&lt;AUTHORS&gt;&gt;</p>
<p>
</p>
<hr />
<h1><a name="created__uplink_">CREATED &lt;UPLINK&gt;</a></h1>
<p>2003-11-27</p>
<p>
</p>
<hr />
<h1><a name="revision__uplink_">REVISION &lt;UPLINK&gt;</a></h1>
<p>$Id: RGmath.pm,v 1.8 2004/09/08 23:49:14 rguin Exp $ (Release: $Name:  $)</p>

<pre>
<span class="k">return</span> <span class="n">1</span><span class="sc">;</span>
<a name="EOF-"></a></pre></body>

</html>
