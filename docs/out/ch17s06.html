<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>6.&nbsp;Filesystem changes: Projects/Libraries/Plates</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="LIMS Help Pages"><link rel="up" href="ch17.html" title="Chapter&nbsp;17.&nbsp;Administration"><link rel="prev" href="ch17s05.html" title="5.&nbsp;Stock Notification"><link rel="next" href="ch17s07.html" title="7.&nbsp;Adding a New Department"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.&nbsp;Filesystem changes: Projects/Libraries/Plates</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch17s05.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;17.&nbsp;Administration</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch17s07.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5304"></a>6.&nbsp;Filesystem changes: Projects/Libraries/Plates</h2></div></div></div><p>The names for projects, libraries, and plates are used by the system as part of the filesystem structure. Thus, changing these are a lot more dangerous than just changing database fields. This section summarizes the steps necessary for changing these when the need arises.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Changing project paths, library names, and plate names are inherently dangerous. If they are properly tracked in the LIMS, there should never be a need to change these names.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>These changes will invalidate cached statistics for the affected projects or libraries. Inform the project and lab admins BEFORE this is done.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5316"></a>6.1.&nbsp;Changing Project Path</h3></div></div></div><p>Changing the project path is the most straightforward.</p><div class="orderedlist"><ol type="1"><li><p>Inform the affected project and lab admins.</p></li><li><p>move the old filesystem project path to the desired path</p></li><li><p>change the Project_Path field in the Project table to the desired path. This should be short, descriptive, and unique.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5331"></a>6.2.&nbsp;Changing Library Names</h3></div></div></div><p>Changing Library names is very involved, as it is used in a myriad of fields and files.</p><div class="orderedlist"><ol type="1"><li><p>Inform the affected project and lab admins.</p></li><li><p>use DBIntegrity.pl to find all references to the existing Library name. Note down all of the fields found. Likely tables include Plate,LibraryPrimer, and Sequencing_Library.</p></li><li><p>Change these references to use the new Library name.</p></li><li><p>Search for the library name in Sequence_Subdirectory. Sequence_Subdirectory uses the Library name as a prefix. Note down all of these entries.</p></li><li><p>Change these entries to use the new Library name.</p></li><li><p>Go to /home/sequence/Projects/(old project_path)/. A directory exists with the library name as its name.</p></li><li><p>Rename this directory.</p></li><li><p>Go to /home/sequence/Projects/(new project_path)/(new library_name)/AnalyzedData. There will be multiple directories here whose names start with library names. Each directory represents a single experiment run.</p></li><li><p>Rename these directories to represent the new library name.</p></li><li><p>For each of these directories, go into the chromat_dir directory.</p><div class="orderedlist"><ol type="a"><li><p>Note that the directory that the trace files reside on is named for the library. Also, each trace file is named for the library as well. The files that reside in the chromat directory are only symlinks to the actual trace files.</p></li><li><p>The directory that the actual trace files reside on is actually a symlink to the run directory. Rename this symlink to the new library name.</p></li><li><p>Rename each trace file to the new library name.</p></li><li><p>Relink the symlinks in the chromat directory to the correct trace files.</p></li></ol></div></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Steps 7-9 can be shortened if the library is relatively small. You can delete the contents of the /home/sequence/Projects/(project_path)/(library_name)/AnalyzedData/ directory and run update_sequence.pl -A all on all the runs that have been done on the Library. Since this reanalyzes the runs, this should be avoided if possible.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5383"></a>6.3.&nbsp;Moving plates from one library to another</h3></div></div></div><p>Changing plate names (essentially moving plates from one library to another) is a subset of the work that needs to be done when changing library names. However, it is more complicated because a plate could have multiple runs done on it.</p><div class="orderedlist"><ol type="1"><li><p>Inform the affected project and lab admins.</p></li><li><p>Find all the plate ids that are either ancestors or children of this plate.</p></li><li><p>Find the maximum plate number of the library you are moving the plate to. Note this number down.</p></li><li><p>Change the FK_Library__Name of the plate (and all its children) to reflect the library you are moving it to.</p></li><li><p>Change the Plate_Number of the plate (and all its children) to the maximum plate number of the library plus one.</p></li><li><p>Find all the runs that have been done on this plate (and all its children).</p></li><li><p>Go to /home/sequence/Projects/(old project_path)/(old library_name)/AnalyzedData. Locate the directories that correspond to all the runs from this plate.</p></li><li><p>Move all of the corresponding directories to /home/sequence/Projects/(new project_path)/(new library_name)/AnalyzedData, and rename the directories to represent the new library name.</p></li><li><p>For each of these directories, go into the chromat_dir directory.</p><div class="orderedlist"><ol type="a"><li><p>Note that the directory that the trace files reside on is named for the library. Also, each trace file is named for the library as well. The files that reside in the chromat directory are only symlinks to the actual trace files.</p></li><li><p>The directory that the actual trace files reside on is actually a symlink to the run directory. Rename this symlink to the new library name.</p></li><li><p>Rename each trace file to the new library name.</p></li><li><p>Relink the symlinks in the chromat directory to the correct trace files.</p></li></ol></div></li></ol></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch17s05.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch17.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch17s07.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5.&nbsp;Stock Notification&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;7.&nbsp;Adding a New Department</td></tr></table></div></body></html>